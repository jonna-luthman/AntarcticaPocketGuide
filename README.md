# ANTARCTICA POCKET GUIDE

## A mobile application in webview built with React/Ionic and Supabase with the purpose so serve as a digital handbook for Antarctica.

The purpose of the app is to create a digital handbook for Antarctica. The app's primary content will be educational facts and information specifically about Antarctica's wildlife. It is designed to be a simple, easy-to-use tool intended mainly for visitors to the continent, helping them easily access information and tips to maximize their experience.

## Project status: MVP (version 1.0)
This application is currently in its MVP (Minimal Viable Status) phase.
The primary focus for the first application has been to establish a solid foundation for:
- Secure authentication and user profile syncronization.
- Core educational content delivery for Antarctic wildlife.
- Architecture for multilanguage support.

As an MVP, the project prioritizes stability and clean architecture over a large feature set, serving as a "proof of concept" for a digital handbook.

## Tech stack
- Frontend: React, Typescript, Ionic Framework
- Native Bridge: Capacitor
- Backend/Database: Supabase (PostgreSQL)
- Build tool: Vite
- Localization: i18next (Multi-language support)
- Communication: Supabase Edge Functions

## How to install the application
Prerequisites:
- Access to the private repository on Github
- Node.js installed
- Xcode (for iOS development) and Android Studio (for Android development)
- Supabase CLI (for Edge functions development)

1. Clone the repository from gitHub
2. Install dependencies: Run 'npm install' in your terminal.
3. Setup keys: Create an .env file in the source directory and add following keys:
    VITE_SUPABASE_URL='your-url'
    VITE_SUPABASE_ANON_KEY='your-anon-key'
    RESEND_API_KEY='your-resend-key'
4. Run development server: Run 'npm run dev' or 'ionic serve' in your terminal.

## Architecture and structure
The project follows a modular strcucture to separate logic from UI.
Source folder (/src):
- /api - Functions for direct communication with Supabase
- /assets - Static files like images and icons not hosted on Supabase Storage.
- /components - Reusable UI elements and sub-components to keep page files manageable.
- /constants - Centralized constants and mappings for database Enums.
- /context - Global state management (Auth, Loading)
- /hooks - Custom hooks for business logic, data fetching, and i18n logic.
- /mappers - Data transformation logic that formats raw API/database responses into clean objects for the frontend.
- /pages - Main view components mapped to the application routes.
- /theme - Global CSS variables, styling, and Ionic theme overrides.
- /types - TypeScript interfaces and type definitions.
- /utils - Pure helper functions for filtering, date formatting, and data manipulation.

Styling strategy
- Ionic Utilities: We prioritize Ionic’s built-in CSS classes for layout and standard spacing to keep the codebase lean.
- Modular CSS: For specific or complex designs, we use CSS Modules to ensure style encapsulation and prevent global scope pollution.
- Organization: Custom stylesheets are not created for every file—only when specific styling is required. In those cases, the .module.css file is located within a styles/ subdirectory inside the corresponding component or page folder.
- Theming: Global design tokens, CSS variables, and Ionic theme overrides are centrally managed in src/theme/.

Backend and Build folders:
- supabase/functions - Edge Functions (Deno) handling server-side logic (e.g., Resend email integration).

- dist/ - The production-ready web bundle generated by the build process (npm run build).
- ios/ and android/ - Native platform projects managed by Capacitor. Open these in Xcode or Android Studio.

## Mobile workflow
To sync your webchanges to the anive mobile projects:
1. Build the web project: 'npm run build'
2. Sync with Capacitor: 'ionic cap sync' (syncronizes both ios and android)
3. Open the native IDE: 'ionic cap open ios' or 'ionic cap open android'

## Localization (i18n)
The app is designed to be multi-lingual. For the moment is available in English and Spanish.
- Storage: Translation files are located in src/utils/locales/.
- Structure: Each supported language has its own subfolder (/en, /es) conatining a translation.json file.
- Json files: Using nested objects to group translations by feature
    e.g "pages": { "home": {"title": "Welcome"} }
- Usage: Translations are accessed using the useTranslation hook throughout the application.

### Dynamic Content Localization
While 'i18next' handles static UI text, we use a custom hook 'useGetLang' for localized database content (e.g., facts).

-Logic: The hook detects the current language and appends the suffix (e.g., '_en', '_sv') to the requested database field.
If a translation for the current language is missing in the database, it automatically falls back to the English ('_en') version to ensure content is always visible.

## Known issues
### Performance & Image Optimization
Currently, the Lighthouse performance score is impacted by how media assets are handled. This is a conscious trade-off as current images are provisional.

The Issue: High LCP (Largest Contentful Paint) and CLS (Cumulative Layout Shift) due to large unoptimized image files being fetched from Supabase Storage.

Planned Solutions:
Responsive Images: Implement srcset by uploading multiple image scales (thumbnail, mobile, desktop) to Supabase to ensure users only download the resolution they need.
Skeleton Screens: Replace current loading states with IonSkeletonText to improve perceived performance and eliminate layout shifts.
Enhanced Caching: Implement a Service Worker (PWA) to cache assets locally on the user's device for near-instant repeat loads.

### Accessibility and Focus Management
There is a known accessibility degradation regarding focus handling within IonModal.

The Issue: When a modal is opened, the keyboard focus does not always automatically move to the first interactive element, and in some cases, focus can "leak" to elements behind the modal (the main content). This makes navigation difficult for users relying on screen readers or keyboards.

Root Cause: This is related to how the Shadow DOM in certain Ionic versions interacts with React's focus management. Despite attempts to use initialFocus and manual ref focusing, the behavior remains inconsistent across different mobile browsers.
